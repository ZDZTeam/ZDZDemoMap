function updateSearchKey(key){key=key==null?"":key;var js='updateTitleKey("'+key+'");';var title=zdz.getView("title");title.eval(js)}function trim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function onPageLoad(){zdztool.full();zdztool.searchline("#0099e8");zdztool.input("fsearch","fsearch");zdztool.back("backBtn");zdztool.click("searchbtn",onKeySearch);zdztool.click("parkBtn",onParkSearch);zdztool.click("oilBtn",onOilSearch);updateSearchKey("")}function onKeySearch(){var a=document.getElementById("fsearch").value;a=a==null?"":trim(a);if(a.length==0){zdztool.showAlert("错误",["搜索关键字不能为空！"]);return}zdztool.savePref({fsearch:a,fselect:-1});updateSearchKey(a);var b=zdz.getView("map");b.setSearchCallback("onKeyResult");b.searchKey(a);zdztool.showLoading()}function onKeyResult(d,e,f,a,b){zdztool.hideLoading();var c=document.getElementById("fsearch");if(e<0){zdztool.showAlert('查找 "'+c+'" 失败!');return}if(e==0){zdztool.showAlert('附近没有找到 "'+c+'" !');return}zdztool.previous()}function onParkSearch(){zdztool.savePref({fselect:-1});updateSearchKey("停车场");var a=zdz.getView("map");a.setSearchCallback("onParkResult");a.searchKey("停车场");zdztool.showLoading()}function onParkResult(c,d,e,a,b){zdztool.hideLoading();if(d<0){zdztool.showAlert("查找停车场失败!");return}if(d==0){zdztool.showAlert("附近没有找到停车场!");return}zdztool.previous()}function onOilSearch(){zdztool.savePref({fselect:-1});updateSearchKey("加油站");var a=zdz.getView("map");a.setSearchCallback("onOilResult");a.searchKey("加油站");zdztool.showLoading()}function onOilResult(c,d,e,a,b){zdztool.hideLoading();if(d<0){zdztool.showAlert("查找加油站失败!");return}if(d==0){zdztool.showAlert("附近没有找到加油站!");return}zdztool.previous()};